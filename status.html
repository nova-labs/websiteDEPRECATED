<%args>
    $status => ''
</%args>

<%init>
my $status_flag_file = "/tmp/space-is-open";

# writing status
if ( $status && ( $status eq 'open' || $status eq 'closed' ) ) {
    # params validated, safe to overwrite state file
    open( my $status_fh, ">", $status_flag_file );
    print $status_fh "$status\n";
    close $status_fh;
} else {
    # reading status, or status value was invalid.
    open( my $status_fh, "<", $status_flag_file );
    $status = <$status_fh>;
    close $status_fh;
}
</%init>

<div class="hero-unit">
<p style="font-size: 500%">Current Status is
% if ( $status eq 'open') {
    OPEN
% } elsif ( $status eq 'closed' ) {
    CLOSED
% } else {
    CLOSED
% }
</p>
</div>

<div class="row">

<br><br><br><br>

<ul>
<li><a href="?status=open">Set Status to OPEN</a></li>
<li><a href="?status=closed">Set Status to CLOSED</a></li>
</ul>
</div>
